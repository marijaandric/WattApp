<standard-template>
    <app-title-bar>
      <h3>User</h3>
    </app-title-bar>
    <app-center-bar *ngIf="loader"><app-loader></app-loader></app-center-bar>
    <app-center-bar *ngIf="!loader">
      <div  class="main-grid"> 
        <div style="display:flex;float:left; flex-direction:column; width:28%; height:fit-content;">
          <app-card [user] = 'user'></app-card>

          <div class="stats-cards">
        
            <app-stats-card class="stats-card" [isBgBlue]="true" [Title]="TitleMin" [subTitle]="theDay + dataMin"[value]="min"></app-stats-card>
            <app-stats-card class="stats-card" [isBgPurple]="true" [Title]="TittleMax" [subTitle]="theDay + dataMax" [value]="max"></app-stats-card>
            <app-stats-card class="stats-card" [isBgPink]="true" [Title]="TitleAverage"  [value]="average"></app-stats-card>
            <app-stats-card class="stats-card" [isBgOrange]="true" [Title]="TitleTotal"  [value]="total"></app-stats-card>
           
          </div>
          <!--<div class="carousel"> 
            <h3 style="margin:30px 0px 10px 10px;">News</h3> 
            <p-carousel [value] = "news" [circular]="false" [numScroll]="1">
              <ng-template let-news pTemplate="new">
                <app-promotion [subTitle]="news.title"
                [Title]="news.content" 
                [Status]="news.priority"
                [isBlue]="true" [isBgBlue]="true" class="promotion">
                </app-promotion>
              </ng-template>
            </p-carousel>
          </div> -->
        </div> 
        <div style="display:flex;float:right; flex-direction:column; width:52%;padding: 0 2% 30px 2%;">
          <div style="width:100%; height:fit-content; display:flex; flex-direction:row;margin-bottom:12px;">

            <div class="pdd-div"><div [ngClass]="{'light-mode':lightMode}" ><p-dropdown [options]="type" [(ngModel)]="selectedType" optionLabel="name" (onChange)="dropdownChange()" >
            </p-dropdown></div></div>
            <div class="pdd-div"><div [ngClass]="{'light-mode':lightMode}" ><p-dropdown [options]="type2" [(ngModel)]="selectedHF"  optionLabel="name" (onChange)="updateType3()" >
            </p-dropdown></div></div>
            <div class="pdd-div"><div [ngClass]="{'light-mode':lightMode}" ><p-dropdown [options]="type3" [(ngModel)]="selectedDate" optionLabel="name" (onChange)="dropdownChange()" >
            </p-dropdown></div></div>
          </div>
          <app-history-forecast style="width:100%;margin-top:20px" [boja1]="color1" [boja2]="color2" [naziv1]="name1" [naziv2]="name2" [array] = "History" [array2]="Forecast" [array3] = "dates" [Title]="Title"></app-history-forecast>
          <div [ngClass]="{'light-mode':lightMode}">
            <p-selectButton style="margin-top:20px" class="flexRow width__fit-content margin-left__auto " [options]="switchOptions" [(ngModel)]="switchValue" optionLabel="label" optionValue="value"></p-selectButton>
          </div>
          <app-table [id] = 'id' *ngIf="switchValue == false"></app-table>
          <app-history-forecast-table
          style="
          margin-top:calc(2.8%);
          display: flex;
          position: relative;
          flex-direction: column;
          height: fit-content;
          border-radius: 20px;
          transition: ease-in-out;
          padding:10px 20px 20px 20px;
          " [name1]="name1" [name2]="name2" [hif]="hif" *ngIf="switchValue == true && table" [ngClass]="{'light-mode':lightMode}"></app-history-forecast-table>
          <app-history-or-forecast-table  *ngIf="switchValue == true && !table"
          style="
            margin-top:calc(2.8%);
            display: flex;
            position: relative;
            flex-direction: column;
            height: fit-content;
            border-radius: 20px;
            transition: ease-in-out;
            padding:10px 20px 20px 20px"  [name]="name" [History]="History" [Forecast]="Forecast" [dates]="dates" >
            </app-history-or-forecast-table>
        </div>
        
        <div style="display:flex;float:right; flex-direction:column; width:20%; height:100%">
        <app-map-for-dso-user [user]="user" style=" min-height:350px;" [ngClass]="{'light-mode':lightMode}"></app-map-for-dso-user>
        <div class="donuts" style="margin-top:calc(3vh);"  [ngClass]="{'light-mode-circles':lightMode}">
          <h5>Monthly power usage</h5>
          <p>in kWh</p>
          <app-circle [id] = 'id' [type] = 'Consumer'></app-circle>
          <h5>Monthly power production</h5>
          <p>in kWh</p>
          <app-circle [id] = 'id' [type] = 'Producer'></app-circle>
          <h5>Monthly storage capacity</h5>
          <p>in kWh</p>
          <app-circle [id] = 'id' [type] = 'Stock'></app-circle>
        </div>
        </div> 
      </div>
    </app-center-bar>
</standard-template>