<div class="device">
  <div class="main-card">
    <div class="top-card">
      <div class="widgets">       
        <app-widget [subTitle]="'Consumption Today'" [Title]="' RSD kW/h'" [isBlue]="true" [isBgBlue]="true" class="widget">
        </app-widget>
        <app-widget [subTitle]="'Consumption this week'" [Title]="' kW/h'" [isYellow]="true" [isBgYellow]="true" class="widget">
        </app-widget>
        <app-widget [subTitle]="'Consumption this month'" [Title]="' kW/h'" [isPink]="true" [isBgPink]="true" class="widget">
        </app-widget>
        <app-widget  [subTitle]="'Consumption this year'" [Title]="' kW/h'" [isOrange]="true" [isBgOrange]="true" class="widget">
        </app-widget>
        <app-widget  [subTitle]="'Consumption all time'" [Title]="' kW/h'" [isBlue]="true" [isBgBlue]="true" class="widget">
        </app-widget>
      </div>
    </div>  

    <div class="bottom-card">
      <div class="bottom-left-card">
        <div class="bottom-left-top-card">
            <div id="deviceInformation" class="flexColumn device-information" >
              <div class="flexRow">
                  <div class="colored-text" ><h5>Device name</h5></div>
              </div>
        
              <div class="flexRow" style="margin-top:16px">
                <span class="bold-text">ID:</span>
                <span class="margin-left__auto"><!--{{ device?.id }}--></span>
              </div>
        
              <div class="flexRow" style="margin-top:10px">
                <span class="bold-text">Model:</span>
                <span class="margin-left__auto"><!--{{ device?.deviceModel }}--></span>
              </div>
        
              <div class="flexRow"style="margin-top:10px" >
                <span class="bold-text">Type:</span>
                <span class="margin-left__auto"><!--{{ device?.deviceType }}--></span>
              </div>
        
              <div class="flexRow"style="margin-top:10px">
                <span class="bold-text">Room:</span>
                <span class="margin-left__auto"><!--{{ device?.room }}--></span>
              </div>
        
              <div class="flexRow"style="margin-top:20px">
                <span class="bold-text">Visible to operators:</span>
                <!--<p-inputSwitch [(ngModel)]="device.allowOperatorVisibility" (onChange)="handleVisibilitySwitchChange()" class="margin-left__auto width__fit-content"/>-->
              </div>
        
              <div class="flexRow margin-top__8px">
                <span class="bold-text">Managed by operators:</span>
                <!--<p-inputSwitch [(ngModel)]="device.allowOperatorControll" (onChange)="handleManagementSwitchChange()" class="margin-left__auto width__fit-content"/>-->
              </div>
            </div>

          <div class="menage-device-div">//manage device
          </div> 
        </div>

        <app-history-forecast id="oneChart" class="margin-top__16px" style="width: 100%;" [array] = 'array' [array2]="array2" [array3] = 'array3'></app-history-forecast>
            
      </div>

      <div class="bottom-right-card">
        <p-dropdown  appendTo="body" optionLabel="name"  >
        </p-dropdown>
        <app-history-forecast-table
        style="
        margin-top:calc(2.8%);
        display: flex;
        position: relative;
        flex-direction: column;
        height: fit-content;
        width: 48.5%;
        border-radius: 20px;
        background-color: #1b1b1b;
        box-shadow: 5px 5px 15px black;
        transition: ease-in-out;
        padding:10px 20px;
        " [name1]="name1" [name2]="name2" [hif]="hif"></app-history-forecast-table>
      </div>
    </div>
  </div>
</div>


<p-dialog id="editDeviceDialogId" [style]="{width:'40%'}"
  [draggable]="false" [keepInViewport]="true" [resizable]="false" 
  [blockScroll]="true" [closeOnEscape]="true" 
  [modal]="true" [(visible)]="displayEditDeviceDialog" [breakpoints]="{'960px': '75vw', '640px': '90vw'}"
  [closable]="true" >
  <ng-template pTemplate="header" class="header-dialog">
    <span>Edit device</span>
  </ng-template>
  
  <ng-template pTemplate="content">
    <form id="editDeviceDialogForm" >  
      <div class="p-inputgroup p-inputtext-lg p-input-filled">
        <div class="half">
          Device type
          <p-dropdown [options]="types" [(ngModel)]="typeSelected" name="typeSelected" appendTo="body" optionLabel="name" />
          Device model
          <p-dropdown [options]="models" [(ngModel)]="modelSelected" name="modelSelected" appendTo="body" optionLabel="name" />
        </div> 
        
        <div class="half">
            Room
          <p-dropdown [options]="rooms" [(ngModel)]="roomSelected" name="roomSelected" appendTo="body" optionLabel="name" />
            Name
          <input style="margin-top:45px;" [(ngModel)]="nameSelected" name="nameSelected" appendTo="body" type="text" class="p-inputtext-lg" placeholder="DEVICE NAME"> 
        </div>
      </div> 
    </form>
  </ng-template>

  <ng-template pTemplate="footer" >
    <div class="flexRow">
      <button style="margin-right: 0px;" (click)="save()" type="submit">Save</button>
      <button class="margin-left__16px" (click)="cancel()" type="submit">Cancel</button>
    </div>
  </ng-template>
</p-dialog>


<p-dialog [style]="{width:'20%'}" header="Title"  [transitionOptions]="'3ms'" 
[draggable]="false" [keepInViewport]="true" [resizable]="false" 
[blockScroll]="true" [closeOnEscape]="true" [dismissableMask]="true" 
[modal]="true" [(visible)]="display3" [breakpoints]="{'960px': '75vw', '640px': '90vw'}"
[closable]="true" >
<ng-template pTemplate="header" class="header-dialog">
  <span>Delete device</span>
</ng-template>

<ng-template pTemplate="center">
  <div class="delete-device-content">
    Are you sure you want to erase the device?
    All data will be deleted and you will not be able to recover it.

  </div>
</ng-template>

<ng-template pTemplate="footer" >
  <button type="button" class="no-button" icon="fa-home" label="No" (click)="showDialog()"><span clas="no-span">No</span></button>
  <button type="button" class="yes-button" icon="pi pi-info-circle" label="Yes" (click)="deleteDevice(device.id)"><span clas="no-span">Yes</span></button>

</ng-template>
</p-dialog>
